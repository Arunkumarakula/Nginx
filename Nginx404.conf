# This is used to avoid 404 error in some cases like whenever the application shows page not found


server {
    listen 80;
    server_name localhost;

    root /usr/share/nginx/html;
    index index.html;

    gzip on;
    gzip_static on;
    gzip_types text/plain text/css application/javascript application/json application/xml image/svg+xml;
    gzip_min_length 1024;

    location ~* \.(?:ico|css|js|gif|jpe?g|png|woff2?|eot|ttf|svg)$ {
        expires 6M;
        add_header Cache-Control "public, immutable";
        try_files $uri /index.html;
    }

    location / {
        try_files $uri /index.html;
    }
}


In React or Angular, the application is a Single Page Application, which means we actually have only one main HTML file — index.html — and all the routing like /login, /dashboard, or /profile is handled by the frontend using JavaScript.
When a user clicks inside the app, everything works because the frontend router manages it.
But when the user refreshes the browser on a route like /dashboard, the request goes to Nginx. Nginx tries to find a physical file named /dashboard, which doesn’t exist in the build folder, so it returns a 404 error.

To fix this, I use try_files $uri /index.html;.
This tells Nginx:

If the requested file exists, serve it

If it doesn’t exist, always serve index.html

This allows the frontend router to take over again and prevents 404 errors on refresh or direct URL access.

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
I added this Nginx configuration to fix 404 errors in a Single Page Application (SPA) like React, Angular.
In SPAs, routing happens on the frontend, not on the server. So when a user refreshes a deep link (for example /dashboard or /profile/123), Nginx tries to find a physical file at that path. When the file doesn’t exist, it returns a 404.
To solve this, I used try_files $uri /index.html; which tells Nginx:

If the file exists, serve it

If not, always return index.html, so the frontend router can handle the route.
This completely removes 404 errors on refresh and ensures all SPA routes work properly
